@inherits LayoutComponentBase
@inject INavigationService NavigationService


<div class="page">
    <main>
        <header class="header-container">
            <div class="header-content">
                <button class="nav-toggle" @onclick="OpenNav">
                    <span class="oi oi-menu"></span>
                </button>
                <Logo />
                <Search />
                <CartCounter />
            </div>
        </header>
        <nav class="nav-container @navRender">
            <div class="nav-content">
                <NavMenu />
            </div>
        </nav>
        <section class="main-container">
            <div class="main-content">
                @Body
            </div>
        </section>
    </main>
</div>

@code {
    private string navRender => NavigationService.NavState ? "nav-mobile" : "";

    private void OpenNav()
    {
        NavigationService.ChangeNavState(true);
    }

    protected override void OnInitialized()
    {
        NavigationService.NavStateChanged += StateHasChanged;
    }

    public void Dispose()
    {
        NavigationService.NavStateChanged -= StateHasChanged;
    }
}